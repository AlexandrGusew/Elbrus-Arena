# ПОЛНАЯ СТРУКТУРА ДРЕВА НАВЫКОВ

## WARRIOR (Воин) - 2 ветки на выбор

### Ветка 1: PALADIN (Паладин)
- **Tier 1:** Shield Mastery
  - Открывает слот для щита (новый слот экипировки)
  - Пассивная способность

- **Tier 2:** Divine Blessing
  - +10% защиты на 1 ход
  - Активная способность (кнопка в бою)
  - Кулдаун: 3 хода

- **Tier 3:** Divine Shield
  - Полная неуязвимость на 1 ход
  - Отражает 50% урона обратно врагу
  - Ульта (кулдаун: 5 ходов)

---

### Ветка 2: BARBARIAN (Варвар)
- **Tier 1:** Dual Wield
  - Открывает слот для второго оружия (новый слот экипировки)
  - Пассивная способность

- **Tier 2:** Battle Rage
  - +10% атаки на 1 ход
  - Активная способность (кнопка в бою)
  - Кулдаун: 3 хода

- **Tier 3:** Bloodlust
  - Каждый удар восстанавливает 20% HP
  - +25% урона на 2 хода
  - Ульта (кулдаун: 5 ходов)

---

## ROGUE (Разбойник) - 2 ветки на выбор

### Ветка 1: SHADOW DANCER (Теневой танцор)
- **Tier 1:** Backstab
  - Добавляет 5-ю зону атаки "спина"
  - Враг должен защищать 3 из 5 зон
  - Пассивная способность

- **Tier 2:** Shadow Step
  - +15% уворота на 2 хода
  - Активная способность (кнопка в бою)
  - Кулдаун: 3 хода

- **Tier 3:** Shadow Clone
  - Создает клона
  - Клон атакует те же зоны (×2 урон)
  - Длительность: 2 хода
  - Ульта (кулдаун: 5 ходов)

---

### Ветка 2: POISONER (Отравитель)
- **Tier 1:** Poison Mastery
  - Все атаки наносят яд
  - Яд: +10% урона каждый ход, 2 хода
  - Пассивная способность

- **Tier 2:** Toxic Coating
  - Усиливает яды
  - +20% урона от ядов на 3 хода
  - Активная способность (кнопка в бою)
  - Кулдаун: 3 хода

- **Tier 3:** Deadly Toxin
  - Яд наносит 50% базового урона каждый ход
  - Длительность: 3 хода
  - Стакается (можно применить несколько раз)
  - Ульта (кулдаун: 5 ходов)

---

## MAGE (Маг) - 2 ветки на выбор

### Ветка 1: FROST MAGE (Ледяной маг)
- **Tier 1:** Summon Water Elemental
  - Призывает элементаля воды
  - Элементаль атакует 1 случайную зону каждый ход
  - Постоянный питомец (пока жив)
  - Пассивная способность

- **Tier 2:** Frost Armor
  - +20% защиты
  - Замедляет врага на 1 ход (враг не может защищаться)
  - Активная способность (кнопка в бою)
  - Кулдаун: 4 хода

- **Tier 3:** Frozen Tomb
  - Замораживает врага на 1 ход
  - Следующая атака гарантированный крит ×3
  - Ульта (кулдаун: 6 ходов)

---

### Ветка 2: WARLOCK (Чернокнижник)
- **Tier 1:** Summon Imp
  - Призывает беса
  - Бес накладывает страх на врага враг может защищать только 2 зоны из 4
  - Постоянный питомец (пока жив)
  - Пассивная способность

- **Tier 2:** Dark Pact
  - Жертвует 10% HP
  - Получает +30% урона на 2 хода
  - Активная способность (кнопка в бою)
  - Кулдаун: 3 хода

- **Tier 3:** Demon Pact
  - Призывает демона
  - Демон атакует 2 случайные зоны каждый ход
  - Длительность: 3 хода
  - Ульта (кулдаун: 6 ходов)

---

## ОБЩИЕ ПРАВИЛА

### Выбор ветки:
- Игрок выбирает 1 из 2 веток при достижении уровня 10
- Выбор ПОСТОЯННЫЙ (нельзя переключить) - но можно поменять за голду!!!!!!
- Выбор ветки меняет визуальный ассет персонажа

### Изучение тиров:
- **Tier 1:** Открывается при выборе ветки (уровень 10)
- **Tier 2:** Открывается на уровне 15
- **Tier 3:** Открывается на уровне 20

### Типы способностей:
- **Пассивные** - работают всегда (Tier 1)
- **Активные** - кнопка в бою с кулдауном (Tier 2)
- **Ульты** - мощные способности с большим кулдауном (Tier 3)

### Кулдауны:
- Tier 2: 3-4 хода
- Tier 3: 5-6 ходов
- Кулдаун считается в раундах боя

---

## ВИЗУАЛЬНЫЕ ИЗМЕНЕНИЯ

### Warrior:
- **Paladin:** тяжелая броня + щит + светлая палитра
- **Barbarian:** легкая броня + 2 оружия + темная палитра

### Rogue:
- **Shadow Dancer:** темный плащ + кинжалы + теневые эффекты
- **Poisoner:** зеленый капюшон + ядовитые кинжалы + зеленые эффекты

### Mage:
- **Frost Mage:** синяя мантия + посох + ледяные эффекты + элементаль
- **Warlock:** фиолетовая мантия + темный посох + демонические эффекты + бес

---

## BACKEND СТРУКТУРА

### Таблица Specialization:
```typescript
{
  id: number
  characterId: number
  class: "WARRIOR" | "ROGUE" | "MAGE"
  branch: "PALADIN" | "BARBARIAN" | "SHADOW_DANCER" | "POISONER" | "FROST_MAGE" | "WARLOCK"
  tier1Unlocked: boolean
  tier2Unlocked: boolean
  tier3Unlocked: boolean
  selectedAt: DateTime
}
```

### API:
- GET /specializations/:class - список веток класса
- POST /specializations/choose - выбрать ветку (1 раз навсегда)
- POST /specializations/unlock-tier - открыть следующий тир
- POST /battle/:battleId/use-ability/:tier - использовать способность в бою
